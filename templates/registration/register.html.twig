{% extends 'base.html.twig' %}

{% block body %}
<section class="min-h-screen bg-cover bg-center" style="background-image: url('{{ asset('images/vu-de-haut.jpg') }}');">
    <div class="flex items-center justify-center min-h-screen bg-black bg-opacity-50 px-4 py-12">
        <div class="bg-white p-8 rounded-lg shadow-lg w-full max-w-md" role="form" aria-labelledby="register-title">
            <h2 id="register-title" class="text-2xl font-semibold text-center mb-4 text-gray-700">Créez votre compte</h2>

            {{ form_start(registrationForm, {'attr': {'class': 'space-y-4', 'aria-describedby': 'register-description'}}) }}

            <!-- Email -->
            <div class="flex flex-col">
                {{ form_label(registrationForm.email, null, {'label_attr': {'class': 'text-gray-600'}}) }}
                {{ form_widget(registrationForm.email, {'attr': {'class': 'p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500', 'aria-required': 'true'}}) }}
                {{ form_errors(registrationForm.email, {'attr': {'class': 'text-red-500 text-sm', 'role': 'alert'}}) }}
            </div>

            <!-- Pseudo -->
            <div class="flex flex-col">
                {{ form_label(registrationForm.pseudo, null, {'label_attr': {'class': 'text-gray-600'}}) }}
                {{ form_widget(registrationForm.pseudo, {'attr': {'class': 'p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500', 'aria-required': 'true'}}) }}
                {{ form_errors(registrationForm.pseudo, {'attr': {'class': 'text-red-500 text-sm', 'role': 'alert'}}) }}
            </div>

            <!-- Mot de passe -->
            <div class="flex flex-col">
                {{ form_label(registrationForm.plainPassword.first, null, {'label_attr': {'class': 'text-gray-600'}}) }}
                {{ form_widget(registrationForm.plainPassword.first, {
                    'attr': {
                        'id': 'password1',
                        'class': 'p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500',
                        'type': 'password',
                        'aria-required': 'true'
                    }
                }) }}
                {{ form_errors(registrationForm.plainPassword.first, {'attr': {'class': 'text-red-500 text-sm', 'role': 'alert'}}) }}
            </div>

            <!-- Confirmation mot de passe -->
            <div class="flex flex-col">
                {{ form_label(registrationForm.plainPassword.second, null, {'label_attr': {'class': 'text-gray-600'}}) }}
                {{ form_widget(registrationForm.plainPassword.second, {
                    'attr': {
                        'id': 'password2',
                        'class': 'p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500',
                        'type': 'password',
                        'aria-required': 'true'
                    }
                }) }}
                {{ form_errors(registrationForm.plainPassword.second, {'attr': {'class': 'text-red-500 text-sm', 'role': 'alert'}}) }}
            </div>

            <!-- Conditions d'utilisation -->
            <div class="flex items-start gap-3">
                {{ form_widget(registrationForm.agreeTerms, {
                    'attr': {
                        'class': 'mt-1 rounded border-gray-300 text-indigo-600 shadow-sm focus:ring focus:ring-indigo-200 focus:ring-opacity-50',
                        'aria-required': 'true'
                    }
                }) }}
                <label for="{{ registrationForm.agreeTerms.vars.id }}" class="text-sm text-gray-700">
                    J'accepte les
                    <a href="/conditions-utilisation" class="text-primary-color-green-main underline hover:text-green-500">conditions générales d'utilisation</a>
                    et la
                    <a href="/politique-confidentialite" class="text-primary-color-green-main underline hover:text-green-500">politique de confidentialité</a>.
                </label>
            </div>
            {{ form_errors(registrationForm.agreeTerms, {'attr': {'class': 'text-red-500 text-sm', 'role': 'alert'}}) }}

            <!-- Bouton de soumission -->
            <button type="submit" class="w-full bg-green-600 text-white py-3 rounded-md mt-4 hover:bg-primary-color-green-main focus:outline-none" aria-label="Créer un compte">
                Créer compte
            </button>

            <!-- Lien vers la page de connexion -->
            <div class="text-center mt-4">
                <a href="{{ path('app_login') }}" class="text-sm text-primary-color-green-main hover:underline">Vous avez déjà un compte ? Connectez-vous ici</a>
            </div>

            {{ form_end(registrationForm) }}
        </div>
    </div>
</section>
{% endblock %}

{# 1. Ce fichier register.html.twig étend le fichier de base `base.html.twig` pour hériter de la structure principale du site.  
2. Il affiche une section pleine page avec une image de fond et une superposition sombre pour mettre en avant le formulaire d'inscription.  
3. Le formulaire d'inscription est généré dynamiquement avec Symfony Forms, incluant des champs pour l'email, le pseudo, le mot de passe et la confirmation du mot de passe.  
4. Chaque champ est accompagné d'un label descriptif et affiche des messages d'erreur en cas de validation incorrecte.  
5. Une case à cocher permet aux utilisateurs d'accepter les conditions générales et la politique de confidentialité, avec des liens cliquables.  
6. Les champs obligatoires sont marqués avec `aria-required="true"` pour améliorer l'accessibilité.  
7. Les messages d'erreur utilisent `role="alert"` pour être détectés par les lecteurs d'écran.  
8. Un bouton de soumission stylisé permet de valider le formulaire et de créer un compte.  
9. Un lien vers la page de connexion est affiché sous le formulaire pour les utilisateurs ayant déjà un compte.  
10. Le fichier utilise des pratiques d'accessibilité comme les rôles ARIA et des descriptions claires pour les actions et les champs. #}